image: "docker.io/epitechcontent/epitest-docker:latest"

# before_script:
#   - apt-get update -qq && apt-get install -y -qq sqlite3 libsqlite3-dev nodejs
#   - ruby -v
#   - which ruby
#   - gem install bundler --no-document
#   - bundle install --jobs $(nproc)  "${FLAGS[@]}"

unit_tests:
  script:
    - make tests_run
    - ./unit_tests
    - gcovr -r .
  only:
    variables:
      - $CI_COMMIT_MESSAGE =~ /^.*(\bRUN_UNIT_TESTS\b)?.*$/

functional_tests:
  script:
    - make
    - ./ftest.sh
  only:
    variables:
      - $CI_COMMIT_MESSAGE =~ /^.*(\bRUN_FUNCTIONAL_TESTS\b)?.*$/
